(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{2118:function(e,s,a){Promise.resolve().then(a.bind(a,1211)),Promise.resolve().then(a.bind(a,4530)),Promise.resolve().then(a.bind(a,4874)),Promise.resolve().then(a.t.bind(a,2972,23))},2519:function(e,s,a){"use strict";a.d(s,{PostGrid:function(){return m}});var t=a(7437),r=a(6070),n=a(2208),l=a(8997),i=a(2718),c=a(7648),o=a(2265),d=a(970);function m(e){let{userId:s,type:a}=e,[m,u]=(0,o.useState)([]),[x,h]=(0,o.useState)(!0),f=(0,d.e)();(0,o.useEffect)(()=>{g()},[s,a]);let g=async()=>{h(!0);try{let e=f.from("posts").select("\n          id,\n          content,\n          image_url,\n          like_count,\n          comment_count,\n          view_count,\n          created_at,\n          profiles:author_id (\n            username,\n            display_name,\n            avatar_url\n          )\n        ");switch(a){case"posts":e=e.eq("author_id",s);break;case"saved":e=e.select("\n              id,\n              content,\n              image_url,\n              like_count,\n              comment_count,\n              view_count,\n              created_at,\n              profiles:author_id (\n                username,\n                display_name,\n                avatar_url\n              ),\n              saved_posts!inner (user_id)\n            ").eq("saved_posts.user_id",s);break;case"liked":e=e.select("\n              id,\n              content,\n              image_url,\n              like_count,\n              comment_count,\n              view_count,\n              created_at,\n              profiles:author_id (\n                username,\n                display_name,\n                avatar_url\n              ),\n              likes!inner (user_id)\n            ").eq("likes.user_id",s).not("likes.post_id","is",null);break;case"tagged":e=e.select("\n              id,\n              content,\n              image_url,\n              like_count,\n              comment_count,\n              view_count,\n              created_at,\n              profiles:author_id (\n                username,\n                display_name,\n                avatar_url\n              )\n            ").textSearch("content","@".concat(s))}let{data:t,error:r}=await e.order("created_at",{ascending:!1}).limit(12);if(r)throw r;let n=(null==t?void 0:t.map(e=>({...e,author:Array.isArray(e.profiles)?e.profiles[0]:e.profiles})))||[];u(n)}catch(e){console.error("Error fetching posts:",e),u([])}finally{h(!1)}};return x?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,s)=>(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},s))}):0===m.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(n.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No posts yet"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["posts"===a&&"Start sharing your style moments!","saved"===a&&"Save posts you love to see them here.","liked"===a&&"Posts you like will appear here.","tagged"===a&&"Posts where you're tagged will show up here."]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,t.jsx)(c.default,{href:"/post/".concat(e.id),children:(0,t.jsx)(r.Zb,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300",children:(0,t.jsxs)("div",{className:"aspect-square relative overflow-hidden",children:[(0,t.jsx)("img",{src:e.image_url||"/placeholder.svg",alt:"Post content",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(l.Z,{className:"w-5 h-5 fill-current"}),(0,t.jsx)("span",{className:"font-semibold",children:e.like_count})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 fill-current"}),(0,t.jsx)("span",{className:"font-semibold",children:e.comment_count})]})]})})]})})},e.id))})}},4530:function(e,s,a){"use strict";a.d(s,{ProfileHeader:function(){return v}});var t=a(7437),r=a(6831),n=a(2869),l=a(6070),i=a(970),c=a(2265),o=a(8837),d=a(7806);function m(e){let{targetUserId:s,currentUserId:a}=e,[r,l]=(0,c.useState)(!1),[m,u]=(0,c.useState)(!1),x=(0,i.e)();(0,c.useEffect)(()=>{h()},[s,a]);let h=async()=>{let{data:e}=await x.from("follows").select("id").eq("follower_id",a).eq("following_id",s).single();l(!!e)},f=async()=>{u(!0);try{r?(await x.from("follows").delete().eq("follower_id",a).eq("following_id",s),l(!1)):(await x.from("follows").insert({follower_id:a,following_id:s}),l(!0))}catch(e){console.error("Error updating follow status:",e)}finally{u(!1)}};return(0,t.jsx)(n.z,{onClick:f,disabled:m,variant:r?"outline":"default",className:r?"border-gray-300 text-gray-700 hover:bg-red-50 hover:text-red-600 hover:border-red-300":"bg-gradient-to-r from-rose-500 to-orange-500 hover:from-rose-600 hover:to-orange-600 text-white",children:m?"Loading...":r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Unfollow"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Follow"]})})}var u=a(9337),x=a(8728),h=a(3774),f=a(8335),g=a(1047),p=a(7648);function v(e){var s,a;let{profile:i,isOwnProfile:c,currentUserId:o}=e;if(!i)return(0,t.jsx)(l.Zb,{className:"mb-6",children:(0,t.jsx)(l.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 animate-pulse",children:[(0,t.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})]})]})]})})});let d=i.created_at?new Date(i.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Unknown";return(0,t.jsx)(l.Zb,{className:"mb-6",children:(0,t.jsx)(l.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)(r.Avatar,{className:"w-24 h-24 md:w-32 md:h-32",children:[(0,t.jsx)(r.AvatarImage,{src:i.avatar_url||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",alt:i.display_name}),(0,t.jsx)(r.AvatarFallback,{className:"bg-gradient-to-br from-rose-500 to-orange-500 text-white text-2xl",children:(null===(s=i.display_name)||void 0===s?void 0:s.charAt(0).toUpperCase())||(null===(a=i.username)||void 0===a?void 0:a.charAt(0).toUpperCase())||"U"})]})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 truncate",children:i.display_name||"Unknown User"}),i.is_verified&&(0,t.jsx)(u.Z,{className:"w-5 h-5 text-blue-500 fill-current"})]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-2",children:["@",i.username||"unknown"]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:c?(0,t.jsx)(n.z,{asChild:!0,variant:"outline",children:(0,t.jsxs)(p.default,{href:"/settings",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})}):o&&(0,t.jsx)(m,{targetUserId:i.id,currentUserId:o})})]}),i.bio&&(0,t.jsx)("p",{className:"text-gray-700 mb-4 text-pretty",children:i.bio}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-4",children:[i.location&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:i.location})]}),i.website&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4"}),(0,t.jsx)("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"text-rose-600 hover:underline",children:i.website.replace(/^https?:\/\//,"")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Joined ",d]})]})]}),(0,t.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:i.post_count||0}),(0,t.jsx)("span",{className:"text-gray-600 ml-1",children:"Posts"})]}),(0,t.jsxs)(p.default,{href:"/profile/".concat(i.username,"/followers"),className:"hover:underline",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:i.follower_count||0}),(0,t.jsx)("span",{className:"text-gray-600 ml-1",children:"Followers"})]}),(0,t.jsxs)(p.default,{href:"/profile/".concat(i.username,"/following"),className:"hover:underline",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:i.following_count||0}),(0,t.jsx)("span",{className:"text-gray-600 ml-1",children:"Following"})]})]})]})]})})})}},4874:function(e,s,a){"use strict";a.d(s,{ProfileTabs:function(){return f}});var t=a(7437);a(2265);var r=a(1312),n=a(4508);function l(e){let{className:s,...a}=e;return(0,t.jsx)(r.fC,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)(r.aV,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)(r.xz,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)(r.VY,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",s),...a})}var d=a(2519),m=a(1473),u=a(1178),x=a(8997),h=a(2720);function f(e){let{profile:s,isOwnProfile:a}=e;return s?(0,t.jsxs)(l,{defaultValue:"posts",className:"w-full",children:[(0,t.jsxs)(i,{className:"grid w-full grid-cols-4 mb-6",children:[(0,t.jsxs)(c,{value:"posts",className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Posts"})]}),a&&(0,t.jsxs)(c,{value:"saved",className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Saved"})]}),(0,t.jsxs)(c,{value:"liked",className:"flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Liked"})]}),(0,t.jsxs)(c,{value:"tagged",className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Tagged"})]})]}),(0,t.jsx)(o,{value:"posts",children:(0,t.jsx)(d.PostGrid,{userId:s.id,type:"posts"})}),a&&(0,t.jsx)(o,{value:"saved",children:(0,t.jsx)(d.PostGrid,{userId:s.id,type:"saved"})}),(0,t.jsx)(o,{value:"liked",children:(0,t.jsx)(d.PostGrid,{userId:s.id,type:"liked"})}),(0,t.jsx)(o,{value:"tagged",children:(0,t.jsx)(d.PostGrid,{userId:s.id,type:"tagged"})})]}):(0,t.jsx)("div",{className:"w-full h-64 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-muted-foreground",children:"Loading profile..."})})}},6070:function(e,s,a){"use strict";a.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},ll:function(){return i}});var t=a(7437);a(2265);var r=a(4508);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...a})}}}]);